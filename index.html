<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pendaftaran Siswa Baru - KB Harapan Bunda</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary: #118AB2; --secondary: #06D6A0; --dark: #073B4C; --light: #f4f7f6; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        body { background: var(--light); color: var(--dark); line-height: 1.6; }
        
        .container { max-width: 700px; margin: 40px auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { color: var(--primary); font-size: 2rem; margin-bottom: 10px; }
        .header p { color: #666; }

        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--dark); }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%; padding: 12px; border: 2px solid #e1e1e1; border-radius: 8px; font-size: 1rem; transition: 0.3s;
        }
        .form-group input:focus, .form-group textarea:focus { border-color: var(--primary); outline: none; }
        
        .section-title { margin-top: 30px; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #eee; color: var(--primary); font-size: 1.2rem; }

        .btn-submit {
            width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        .btn-submit:hover { background: #0c6ba1; }
        
        /* Loading Overlay */
        .loading { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(255,255,255,0.9); z-index: 999; flex-direction: column; justify-content: center; align-items: center; }
        .spinner { width: 50px; height: 50px; border: 5px solid #f3f3f3; border-top: 5px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div class="loading" id="loadingOverlay">
        <div class="spinner"></div>
        <p style="margin-top: 20px; font-weight: bold;">Sedang Mengirim Data...</p>
    </div>

    <div class="container">
        <div class="header">
            <h1>Formulir Pendaftaran</h1>
            <p>Silakan isi data calon siswa dengan benar</p>
        </div>

        <form id="pendaftaranForm" name="submit-to-google-sheet">
            <input type="hidden" name="action" value="simpan_pendaftaran">

            <h3 class="section-title"><i class="fas fa-child"></i> Data Anak</h3>
            
            <div class="form-group">
                <label>Nama Lengkap Anak</label>
                <input type="text" name="nama" required placeholder="Contoh: Budi Santoso">
            </div>

            <div class="form-group">
                <label>Tanggal Lahir</label>
                <input type="date" name="tgl_lahir" required>
            </div>

            <div class="form-group">
                <label>Jenis Kelamin</label>
                <select name="jk" required>
                    <option value="">-- Pilih --</option>
                    <option value="Laki-laki">Laki-laki</option>
                    <option value="Perempuan">Perempuan</option>
                </select>
            </div>

            <div class="form-group">
                <label>Agama</label>
                <select name="agama" required>
                    <option value="Islam">Islam</option>
                    <option value="Kristen">Kristen</option>
                    <option value="Katolik">Katolik</option>
                    <option value="Hindu">Hindu</option>
                    <option value="Buddha">Buddha</option>
                    <option value="Konghucu">Konghucu</option>
                </select>
            </div>

            <div class="form-group">
                <label>Alamat Lengkap</label>
                <textarea name="alamat" rows="3" required placeholder="Jalan, RT/RW, Kelurahan..."></textarea>
            </div>

            <h3 class="section-title"><i class="fas fa-user-friends"></i> Data Orang Tua</h3>

            <div class="form-group">
                <label>Nama Ayah</label>
                <input type="text" name="nama_ayah" required>
            </div>

            <div class="form-group">
                <label>Pekerjaan Ayah</label>
                <input type="text" name="pek_ayah" required>
            </div>

            <div class="form-group">
                <label>Nama Ibu</label>
                <input type="text" name="nama_ibu" required>
            </div>

            <div class="form-group">
                <label>Pekerjaan Ibu</label>
                <input type="text" name="pek_ibu" required>
            </div>

            <div class="form-group">
                <label>No. HP / WhatsApp (Ibu/Wali)</label>
                <input type="tel" name="hp_ibu" required placeholder="08xxxxxxxxxx">
                <small style="color: grey;">*Pastikan nomor aktif WhatsApp</small>
            </div>

            <button type="submit" class="btn-submit">Kirim Pendaftaran</button>
        </form>
    </div>

    <script>
        // GANTI URL INI DENGAN URL SCRIPT GOOGLE ANDA
        const scriptURL = 'https://script.google.com/macros/s/AKfycbxBhc1Y9KnmvGkNz8fJr8NS1eL4NZnt6CJn53ykkxQtnHcd04zYtHujYOvmkmVeKoRN/exec'; 
        
        const form = document.forms['submit-to-google-sheet'];
        const loading = document.getElementById('loadingOverlay');

        form.addEventListener('submit', e => {
            e.preventDefault();
            loading.style.display = 'flex';
            
            // Kita gunakan mode 'no-cors' agar tidak diblokir browser
            fetch(scriptURL, { 
                method: 'POST', 
                body: new FormData(form),
                mode: 'no-cors'
            })
            .then(() => {
                // Karena no-cors, kita tidak bisa baca respon JSON
                // Kita asumsi sukses jika tidak ada error network
                loading.style.display = 'none';
                alert("Alhamdulillah, data berhasil terkirim! Terima kasih Bunda.");
                form.reset();
            })
            .catch(error => {
                loading.style.display = 'none';
                console.error('Error!', error.message);
                alert("Maaf, terjadi kesalahan. Cek koneksi internet Anda.");
            });
        });
    </script>

</body>
</html>